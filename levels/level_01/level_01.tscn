[gd_scene load_steps=15 format=4 uid="uid://df0hist01fbeo"]

[ext_resource type="Script" path="res://levels/level.gd" id="1_ftj0n"]
[ext_resource type="Texture2D" uid="uid://chwbcf7n2ajtp" path="res://art/platforms/Platformer_spritesheet.png" id="1_ort1d"]
[ext_resource type="Texture2D" uid="uid://bja0wl8tcw71c" path="res://art/backgrounds/background_01.png" id="2_nxani"]
[ext_resource type="PackedScene" uid="uid://cy1y0ymx631gl" path="res://player/elf/elf.tscn" id="2_ursk0"]
[ext_resource type="PackedScene" uid="uid://drpsey4wqiarp" path="res://player/knight/knight.tscn" id="3_fil1x"]
[ext_resource type="Texture2D" uid="uid://bujx43rcy5b85" path="res://art/backgrounds/background_02.png" id="3_oj8mb"]
[ext_resource type="PackedScene" uid="uid://bjgdo7lfubanp" path="res://interactables/pushable_objects/pushable_crate.tscn" id="6_f00bu"]
[ext_resource type="PackedScene" uid="uid://dnopy74w4mtew" path="res://interactables/pressure_plate/pressure_plate.tscn" id="6_htjlt"]
[ext_resource type="PackedScene" uid="uid://cj3165pqteo3g" path="res://interactables/door/door.tscn" id="7_usvnk"]
[ext_resource type="PackedScene" uid="uid://cbu888ey24c4k" path="res://interactables/bridge/bridge.tscn" id="7_vf6vq"]
[ext_resource type="PackedScene" uid="uid://7cuiyk210aoy" path="res://interactables/chest/chest.tscn" id="8_ec3s8"]
[ext_resource type="PackedScene" uid="uid://cdbpx1dqcgk2r" path="res://interactables/key_door/key_door.tscn" id="9_q1jkb"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_on8lr"]
texture = ExtResource("1_ort1d")
texture_region_size = Vector2i(128, 128)
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(64, -64, 64, 64, -64, 64)
1:0/0 = 0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
2:0/0 = 0
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, 64, -64, 64)
3:0/0 = 0
3:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -12, 64, -42, 17, -52, 0, -64, -38)
0:1/0 = 0
0:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
1:1/0 = 0
1:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
2:1/0 = 0
2:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
3:1/0 = 0
3:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, -43, 55, -12, 47, 10, 24, 34, 18, 64, -64, 64)
0:2/0 = 0
0:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-33, -64, 64, -64, 64, 64, -32, 64)
1:2/0 = 0
1:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
2:2/0 = 0
2:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
3:2/0 = 0
3:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
0:3/0 = 0
0:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 32, -64, 31, 64, -64, 64)

[sub_resource type="TileSet" id="TileSet_lnivs"]
tile_size = Vector2i(128, 128)
physics_layer_0/collision_layer = 1
physics_layer_0/collision_mask = 0
sources/0 = SubResource("TileSetAtlasSource_on8lr")

[node name="level_01" type="Node2D" node_paths=PackedStringArray("players_container", "spawn_points", "key_door")]
script = ExtResource("1_ftj0n")
players_container = NodePath("----- Players -----/PlayersContainer")
player_scenes = Array[PackedScene]([ExtResource("2_ursk0"), ExtResource("3_fil1x")])
spawn_points = [NodePath("----- Players -----/SpawnPoint_0"), NodePath("----- Players -----/SpawnPoint_1")]
key_door = NodePath("----- Interactables -----/KeyDoor")

[node name="----- Environment -----" type="Node" parent="."]

[node name="ParallaxBackground" type="ParallaxBackground" parent="----- Environment -----"]
offset = Vector2(0, -387)
transform = Transform2D(1, 0, 0, 1, 0, -387)

[node name="ParallaxTrees" type="ParallaxLayer" parent="----- Environment -----/ParallaxBackground"]
position = Vector2(0, -1)
motion_scale = Vector2(0.25, 1)
motion_mirroring = Vector2(1334, 0)

[node name="BackgroundTrees" type="Sprite2D" parent="----- Environment -----/ParallaxBackground/ParallaxTrees"]
texture = ExtResource("2_nxani")
centered = false

[node name="ParallaxHouses" type="ParallaxLayer" parent="----- Environment -----/ParallaxBackground"]
motion_scale = Vector2(0.5, 1)
motion_mirroring = Vector2(1334, 0)

[node name="BackgroundHouses" type="Sprite2D" parent="----- Environment -----/ParallaxBackground/ParallaxHouses"]
texture = ExtResource("3_oj8mb")
centered = false

[node name="TileMapLayer" type="TileMapLayer" parent="----- Environment -----"]
position = Vector2(-30, 109)
scale = Vector2(0.5, 0.5)
tile_map_data = PackedByteArray("AAABAAMAAAACAAIAAAD//wMAAAACAAIAAAAAAAMAAAACAAIAAAACAAMAAAACAAIAAAD+/wMAAAACAAIAAAD+/wQAAAABAAEAAAD//wQAAAABAAEAAAAAAAQAAAABAAEAAAABAAQAAAABAAEAAAACAAQAAAABAAEAAAADAAMAAAACAAIAAAAEAAMAAAACAAIAAAAFAAMAAAACAAIAAAAGAAMAAAACAAIAAAAHAAMAAAACAAIAAAAIAAMAAAACAAIAAAD9/wMAAAACAAIAAAD8/wMAAAACAAIAAAD7/wMAAAACAAIAAAD6/wMAAAACAAIAAAD5/wMAAAACAAIAAAD4/wMAAAACAAIAAAD3/wMAAAACAAIAAAD2/wMAAAACAAIAAAAJAAMAAAACAAIAAAAKAAMAAAACAAIAAAALAAMAAAACAAIAAAAMAAMAAAACAAIAAAANAAMAAAACAAIAAAAOAAMAAAACAAIAAAAPAAMAAAACAAIAAAAQAAMAAAACAAIAAAARAAMAAAACAAIAAAASAAMAAAACAAIAAAATAAMAAAACAAIAAAAUAAMAAAACAAIAAAAVAAMAAAACAAIAAAAWAAMAAAACAAIAAAAXAAMAAAACAAIAAAAOAP//AAADAAAAAAAXAAQAAAABAAEAAAAWAAQAAAABAAEAAAAVAAQAAAABAAEAAAAUAAQAAAABAAEAAAATAAQAAAABAAEAAAASAAQAAAABAAEAAAARAAQAAAABAAEAAAAQAAQAAAABAAEAAAAPAAQAAAABAAEAAAAOAAQAAAABAAEAAAANAAQAAAABAAEAAAAMAAQAAAABAAEAAAALAAQAAAABAAEAAAAKAAQAAAABAAEAAAAJAAQAAAABAAEAAAAIAAQAAAABAAEAAAAHAAQAAAABAAEAAAAGAAQAAAABAAEAAAAFAAQAAAABAAEAAAADAAQAAAABAAEAAAAEAAQAAAABAAEAAAD9/wQAAAABAAEAAAD8/wQAAAABAAEAAAD7/wQAAAABAAEAAAD6/wQAAAABAAEAAAD5/wQAAAABAAEAAAD4/wQAAAABAAEAAAD3/wQAAAABAAEAAAD2/wQAAAABAAEAAAAXAAIAAAABAAEAAAAXAAEAAAABAAEAAAAXAAAAAAABAAEAAAAXAP//AAABAAEAAAAXAP7/AAABAAEAAAAXAP3/AAABAAEAAAAXAPz/AAABAAEAAAAXAPv/AAABAAEAAAAXAPr/AAABAAEAAAAXAPn/AAABAAEAAAAXAPj/AAABAAEAAAAWAPj/AAABAAEAAAAVAPj/AAABAAEAAAAUAPj/AAABAAEAAAATAPj/AAABAAEAAAASAPj/AAABAAEAAAARAPj/AAABAAEAAAAQAPj/AAABAAEAAAAPAPj/AAABAAEAAAAOAPj/AAABAAEAAAANAPj/AAABAAEAAAAMAPj/AAABAAEAAAALAPj/AAABAAEAAAAKAPj/AAABAAEAAAAJAPj/AAABAAEAAAAIAPj/AAABAAEAAAAHAPj/AAABAAEAAAAGAPj/AAABAAEAAAAFAPj/AAABAAEAAAAEAPj/AAABAAEAAAADAPj/AAABAAEAAAACAPj/AAABAAEAAAABAPj/AAABAAEAAAAAAPj/AAABAAEAAAD///j/AAABAAEAAAD+//j/AAABAAEAAAD9//j/AAABAAEAAAD8//j/AAABAAEAAAD7//j/AAABAAEAAAD6//j/AAABAAEAAAD5//j/AAABAAEAAAD4//j/AAABAAEAAAD3//j/AAABAAEAAAD2//j/AAABAAEAAAD2//n/AAABAAEAAAD2//r/AAABAAEAAAD2//v/AAABAAEAAAD2//z/AAABAAEAAAD2//3/AAABAAEAAAD2//7/AAABAAEAAAD2////AAABAAEAAAD2/wAAAAABAAEAAAD2/wEAAAABAAEAAAD2/wIAAAABAAEAAAD3/wIAAAAAAAMAAAD3/wEAAAAAAAMAAAD3/wAAAAAAAAMAAAD3////AAAAAAMAAAD3//7/AAAAAAMAAAD3//3/AAAAAAMAAAD3//z/AAAAAAMAAAD3//v/AAAAAAMAAAD3//r/AAAAAAMAAAD3//n/AAAAAAMAAAAWAAIAAAAAAAIAAAAWAAEAAAAAAAIAAAAWAAAAAAAAAAIAAAAWAP//AAAAAAIAAAAWAP7/AAAAAAIAAAAWAP3/AAAAAAIAAAAWAPz/AAAAAAIAAAAWAPv/AAAAAAIAAAAWAPr/AAAAAAIAAAAWAPn/AAAAAAIAAAAOAAAAAAAAAAIAAAAOAAEAAAAAAAIAAAAOAAIAAAAAAAIAAAAPAAIAAAABAAEAAAAPAAEAAAABAAEAAAAPAAAAAAABAAEAAAAPAP//AAABAAIAAAAQAP//AAACAAIAAAAQAAAAAAABAAEAAAAQAAEAAAABAAEAAAAQAAIAAAABAAEAAAARAP//AAADAAIAAAARAAAAAAABAAEAAAARAAEAAAABAAEAAAARAAIAAAABAAEAAAASAP//AAADAAEAAAASAAAAAAAAAAMAAAASAAEAAAAAAAMAAAASAAIAAAAAAAMAAAD//wAAAAABAAAAAAD+/wAAAAABAAAAAAD9/wAAAAABAAAAAAD8/wAAAAABAAAAAAD7/wAAAAABAAAAAAD6/wAAAAABAAAAAAD5/wAAAAABAAAAAAAAAAAAAAAAAAMAAAD4/wAAAAAAAAIAAAD4/wEAAAAAAAIAAAD4/wIAAAAAAAIAAAA=")
tile_set = SubResource("TileSet_lnivs")

[node name="----- Interactables -----" type="Node" parent="."]

[node name="PushableCrate" parent="----- Interactables -----" instance=ExtResource("6_f00bu")]
position = Vector2(-217, -91)

[node name="Bridge" parent="----- Interactables -----" instance=ExtResource("7_vf6vq")]
position = Vector2(440, 67)

[node name="BridgePlate" parent="----- Interactables -----" instance=ExtResource("6_htjlt")]
position = Vector2(-454, 103)

[node name="BridgePlate2" parent="----- Interactables -----" instance=ExtResource("6_htjlt")]
position = Vector2(-62, 105)

[node name="DoorPlate" parent="----- Interactables -----" instance=ExtResource("6_htjlt")]
position = Vector2(138, 301)

[node name="Door" parent="----- Interactables -----" instance=ExtResource("7_usvnk")]
position = Vector2(5, 302)

[node name="Chest" parent="----- Interactables -----" instance=ExtResource("8_ec3s8")]
position = Vector2(-426, 304)
scale = Vector2(-1, 1)

[node name="KeyDoor" parent="----- Interactables -----" instance=ExtResource("9_q1jkb")]
position = Vector2(1026, 45)

[node name="----- Players -----" type="Node" parent="."]

[node name="PlayersContainer" type="Node2D" parent="----- Players -----"]

[node name="PlayerSpawner" type="MultiplayerSpawner" parent="----- Players -----"]
_spawnable_scenes = PackedStringArray("res://player/elf/elf.tscn", "res://player/knight/knight.tscn")
spawn_path = NodePath("../PlayersContainer")
spawn_limit = 2

[node name="SpawnPoint_0" type="Node2D" parent="----- Players -----"]
position = Vector2(796, 203)

[node name="SpawnPoint_1" type="Node2D" parent="----- Players -----"]
position = Vector2(450, 188)

[connection signal="toggle" from="----- Interactables -----/BridgePlate" to="----- Interactables -----/Bridge" method="activate"]
[connection signal="toggle" from="----- Interactables -----/BridgePlate2" to="----- Interactables -----/Bridge" method="activate"]
[connection signal="toggle" from="----- Interactables -----/DoorPlate" to="----- Interactables -----/Door" method="activate"]
